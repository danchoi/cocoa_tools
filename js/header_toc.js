/* Copyright © 2010 Apple Inc.  All rights reserved. */
if(Prototype.Browser.Xcode&&Prototype.Browser.Xcode4OrNewer){document.body.className+=" Xcode"}var contentFrame,Key,Book={},RefLib={};
String.prototype.isHTTPurl=function(){return this.match(/^https?:\/\//)};
String.prototype.cleanUpURL=function(){var c,b="",a=this;
if(this.match("#")){b="#"+this.split("#")[1];
a=this.split("#")[0]}a=a.replace(/\/\.\/|([^:])\/\//g,"$1/");
if(a==="./"){return""+b}while(a!==c){c=a;
a=a.replace(/[\/][^\/]+\/+\.\.\//,"/")}a=a.replace(/^.[^\/]+\/+\.\.\//,"");
return a+b};
String._div=document.createElement("div");
function targetIsInputField(b){var a=/(input|textarea)/;
return b.tagName.toLowerCase().match(a)?true:false}function writeBreadcrumbs(){function e(){if(!Book.assignments){Book.assignments=contentFrame.doc.getElementById("book-assignments").content.replace(/[{}]/g,"").split(", ")}Book.assignments=Book.assignments;
for(var j=0;
j<Book.assignments.length;
j++){if(Book.assignments[j].match(/^(Framework|Library)/i)){Book.framework=Book.assignments[j].split("/")}if(Book.assignments[j].match(/^Topic\//i)){Book.topic=Book.assignments[j].split("/")}if(Book.assignments[j].match(/^Type\//i)){Book.typeAssignment=Book.assignments[j].split("/")}}if(Book.framework){return Book.framework}else{if(Book.topic){return Book.topic}else{return Book.typeAssignment}}}if(document.getElementById("devcenter").content!="<!-- DEVCENTER_NAME -->"){var c=e();
var d=["<a href='"+document.getElementById("devcenter-url").content+"'>"+document.getElementById("devcenter").content+"</a>","<a href='navigation/'>"+document.getElementById("reflib").content+"</a>"],g=c[0].escapeHTML(),f=(g=="Library")?"Libraries":escape(g)+"s",b=0,a=0,h;
d.push("<a href='navigation/#section="+f+"'>"+g+"</a>");
for(b=1,a=c.length;
b<a;
b++){h=c[b].escapeHTML();
d.push("<a href='navigation/#section="+f+"&topic="+escape(h)+"'>"+h+"</a>");
if(g!=="Framework"){break}}document.getElementById("breadcrumbs").innerHTML=d.join(" <span class='breadcrumb-seperator'></span> ")}else{document.body.addClassName("noBreadcrumbs")}}var Page={init:function(){Page.url=contentFrame.doc.location.pathname.directoryForURL();
Page.root=(contentFrame.doc.getElementById("book-root")?(Page.url+contentFrame.doc.getElementById("book-root").content):"").cleanUpURL();
Page.language=document.getElementsByTagName("html")?document.getElementsByTagName("html")[0].getAttribute("lang"):""}};
function ContentFrame(){this.element=document.getElementById("contents-frame");
Event.observe(this.element,"load",this.handleEvent.bindAsEventListener(this));
this.loadPage();
locationHash.startObserving(this);
this.cJump="";
this.jump="";
return this}ContentFrame.prototype.handleEvent=function(a){switch(a.type){case"load":this.pageDidLoad(a);
break;
case"unload":var b=this;
setTimeout(function(){Event.observe(b.element,"load",b.handleEvent.bindAsEventListener(b))},0);
break;
case"hashchange":this.loadPage(a);
break;
default:console.error("Unexpected event passed to ContentFrame: ".event.type)}};
ContentFrame.prototype.pageDidLoad=function(a){this.doc=this.element.contentWindow.document;
var b=this.doc.location.pathname.replace(window.location.pathname.directoryForURL(),"")+this.doc.location.hash;
locationHash.setHashTo(b);
document.title=this.doc.title;
$$("#title h1")[0].innerHTML=this.doc.title.split(":")[0];
Page.init();
TOC.load();
LegacyNotice.init();
Key.listen();
if(!Prototype.Browser.Xcode){this.doc.body.focus()}Event.observe(this.element,"unload",this.handleEvent.bindAsEventListener(this))};
ContentFrame.prototype.loadPage=function(){var a=window.unescape(window.location.hash.replace(/^#/,""));
if(a){if(a.match(/^[^\/]+:/)){a=""}if(this.doc){this.doc.location.replace(window.unescape(a))}else{this.element.src=window.unescape(a)}}else{window.location.replace(route);
this.doc.location.replace(route)}};
var LegacyNotice={init:function(){if(contentFrame.doc.getElementById("legacyOuterWrapper")){var a=Cookie.get("LastSawLegacyNoticeFor"+contentFrame.doc.getElementById("identifier").content),b;
if(a){a=new Date(a);
b=new Date();
if(b-a>86400000){LegacyNotice.show()}}else{LegacyNotice.show()}}},show:function(){contentFrame.doc.getElementById("legacyOuterWrapper").addClassName("show");
contentFrame.doc.getElementById("LegacyNoticeCloseBox").observe("click",LegacyNotice.close)},close:function(){contentFrame.doc.getElementById("legacyOuterWrapper").removeClassName("show");
contentFrame.doc.getElementById("LegacyNoticeCloseBox").stopObserving("click",LegacyNotice.close);
Cookie.set({cName:"LastSawLegacyNoticeFor"+contentFrame.doc.getElementById("identifier").content,cValue:new Date(),cExpiry:COOKIE_EXPIRE_DATE})}};
function selectJumpToItem(a){document.getElementById("jumpTo").value=a}function setupJumpTo(){function b(){contentFrame.element.contentWindow.locationHash.setHashTo("#"+$F("jumpTo"))}var d="&nbsp;
&nbsp;
&nbsp;
&nbsp;
",f,a,e,g,h,c=/\btypeDef\b|\bconstantName\b|\bfunction\b|\bmethod_property\b|\bcallback\b|\bstruct\b|\bnotification\b|\bvariableName\b/;
g=contentFrame.doc.body.getElementsBySelector(".jump");
if(Book.type==="Reference"&&g.length>1){document.getElementById("jumpTo").innerHTML="";
f=document.createElement("option");
f.innerHTML="Jump To…";
f.value="top";
document.getElementById("jumpTo").insert({bottom:f});
for(e=0;
e<g.length;
e++){h=g[e];
h.id="jumpTo_"+e;
f=document.createElement("option");
a=h.textContent?h.textContent:h.innerHTML;
if(c.test(h.className)){f.innerHTML=d+a;
f.value=h.id}else{if(h.hasClassName("instanceMethod")){f.innerHTML=d+"-&nbsp;
"+a;
f.value=h.id}else{if(h.hasClassName("classMethod")){f.innerHTML=d+"+&nbsp;
"+a;
f.value=h.id}else{f.innerHTML=a;
f.value=h.previous("a").name}}}document.getElementById("jumpTo").insert({bottom:f});
if(contentFrame.doc.location.hash==="#"+f.value){f.selected=true}}document.getElementById("jumpto_button").show();
document.getElementById("jumpTo").observe("change",b);
contentFrame.element.contentWindow.hashChangeObserver();
return document.getElementById("jumpTo")}else{document.getElementById("jumpto_button").hide();
document.getElementById("jumpTo").stopObserving("change",b);
return null}}var TOC={initExpandable:function(e){var c,a,b,d=function(f){return function(){return f}};
for(c=0;
c<e.length;
c++){a=e[c].down("a").getAttribute("href");
b=a.slice(a.lastIndexOf("/")+1,a.length);
if(Cookie.get(b)==="open"){TOC.toggleSection({element:d(e[c])})}}return c},changeCurrentLocation:function(a){if(Page.currentLocation){Page.currentLocation.removeClassName("currentLocation")}Page.currentLocation=Event.element(a);
return Page.currentLocation.addClassName("currentLocation")},processLink:function(a){return a},processFileLinks:function(){if(Book.PDF&&Book.PDF.href){document.getElementById("PDF_link").setAttribute("href",Page.root+Book.PDF.href);
document.getElementById("PDF_link").addClassName("visible")}else{document.getElementById("PDF_link").removeClassName("visible")}if(Book.companionFiles){document.getElementById("Companion_link").setAttribute("href",Page.root+Book.companionFiles);
document.getElementById("Companion_link").addClassName("visible")}else{document.getElementById("Companion_link").removeClassName("visible")}return[document.getElementById("Companion_link"),document.getElementById("PDF_link")]},setupSampleCodeButton:function(){if(Book.sampleCode){document.getElementById("Sample_link").setAttribute("href",Page.root+Book.sampleCode);
if(Prototype.Browser.Xcode){document.getElementById("Sample_button").innerText="Open Project in Xcode"}document.getElementById("downloadSample_button").show()}else{document.getElementById("downloadSample_button").hide()}},build:function(f){var c,e="",a,b,d;
for(c=0;
c<f.length;
c++){d=f[c];
if(d.href&&d.href.charAt(0)!="<"){a=(d.sections&&d.sections.length>0)?"children":"";
b=Cookie.get(d.aref)?Cookie.get(d.aref):"";
e+='<li class="'+a+" "+b+(d.aref?'" data-aref="'+d.aref+'"':'"')+(a?'role="treeitem"':"")+">"+(a?'<span class="disclosure"></span>':'<span class="nodisclosure"></span>')+'<span class="sectionName">'+(d.href?'<a href="'+((d.href.isHTTPurl()?"":Page.root)+d.href).cleanUpURL()+'" target="'+(d.href.isHTTPurl()?"top":"contents-frame")+'">':"")+d.title.escapeHTML()+(d.href?"</a></span>":"</span>")+(a!==""?"<ul>"+TOC.build(f[c].sections)+"</ul>":"")+"</li>"}}return e},didLoad:function(b){Book=b.responseText.evalJSON();
TOC.processFileLinks();
TOC.setupSampleCodeButton();
setupJumpTo();
if(Book.sections&&Book.shouldDisplayTOC&&!(Prototype.Browser.Xcode&&Prototype.Browser.Xcode4OrNewer)){if(Cookie.get("toc-visible")==="false"){TOC.hide()}else{TOC.show()}document.getElementById("toc_button").observe("click",TOC.toggle);
document.getElementById("toc_button").show();
var a=TOC.build(Book.sections);
if(Book.relatedBooks.length>0){Book.relatedBooks.each(function(d,c){var e=TOC.build(d.sections);
if(e!==""){a+='<ul id="TOC_relatedBooks_'+c+'" class="related">';
a+="<h3>"+d.title+"</h3>";
a+=e;
a+="</ul>"}})}document.getElementById("toc").innerHTML=a;
document.getElementById("toc").observe("click",TOC.toggleSection)}else{TOC.hide(true);
document.getElementById("toc_button").hide()}writeBreadcrumbs()},load:function(){if(contentFrame.doc.getElementById("book-json")&&contentFrame.doc.getElementById("book-json").content!==""){return new Ajax.Request(Page.url+contentFrame.doc.getElementById("book-json").content,{method:"get",onSuccess:TOC.didLoad,onFailure:function(a){console.error(a)}})}else{Book={};
TOC.hide(true);
document.getElementById("toc_button").hide();
writeBreadcrumbs()}},hide:function(a){document.getElementById("contents").removeClassName("isShowingTOC");
document.getElementById("tocContainer").removeClassName("isShowingTOC");
document.getElementById("toc_button").down("button").removeClassName("open");
if(a){return false}else{return Cookie.set({cName:"toc-visible",cValue:"false",cExpiry:COOKIE_EXPIRE_DATE,cPath:"/"})}},show:function(){document.getElementById("contents").addClassName("isShowingTOC");
document.getElementById("tocContainer").addClassName("isShowingTOC");
document.getElementById("toc_button").down("button").addClassName("open");
Cookie.expire("toc-visible")},toggle:function(){var a=document.getElementById("tocContainer");
if(a.hasClassName("isShowingTOC")){TOC.hide()}else{TOC.show()}return a},toggleSection:function(b){if(b.element().hasClassName("children")||b.element().hasClassName("disclosure")){var a=b.element().hasClassName("children")?b.element():b.element().parentNode;
if(a.hasClassName("open")){a.removeClassName("open");
return Cookie.expire(a.getAttribute("data-aref"))}else{a.addClassName("open");
return Cookie.set({cName:a.getAttribute("data-aref"),cValue:"open",cExpiry:COOKIE_EXPIRE_DATE,cPath:"/"})}}else{return true}}};
var PageController={next:function(){if(contentFrame.doc.getElementById("next-page")){return(contentFrame.doc.location=contentFrame.doc.getElementById("next-page").href)}else{return null}},previous:function(){if(contentFrame.doc.getElementById("previous-page")){return(contentFrame.doc.location=contentFrame.doc.getElementById("previous-page").href)}else{return null}}};
Key={listen:function(){document.body.observe("keypress",Key.press);
document.body.observe("keydown",Key.down);
document.body.stopObserving("keyup",Key.up);
Event.observe(contentFrame.doc,"keypress",Key.press);
Event.observe(contentFrame.doc,"keydown",Key.down);
Event.stopObserving(contentFrame.doc,"keyup",Key.up);
if(document.getElementById("gh-adcsearch")){document.getElementById("gh-adcsearch").observe("focus",Key.stopListening)}},stopListening:function(){document.body.stopObserving("keypress",Key.press);
document.body.stopObserving("keydown",Key.down);
document.body.observe("keyup",Key.up);
Event.stopObserving(contentFrame.doc,"keypress",Key.press);
Event.stopObserving(contentFrame.doc,"keydown",Key.down);
Event.observe(contentFrame.doc,"keyup",Key.up);
if(document.getElementById("gh-adcsearch")){document.getElementById("gh-adcsearch").observe("blur",Key.listen)}},down:function(b){var a=b.keyCode;
switch(a){case 91:return Key.stopListening();
case 16:return Key.stopListening();
case 17:return Key.stopListening();
case 18:return Key.stopListening();
case 20:return Key.stopListening();
default:return b}},up:function(b){var a=b.keyCode;
switch(a){case 91:return Key.listen();
case 16:return Key.listen();
case 17:return Key.listen();
case 18:return Key.listen();
case 20:return Key.listen();
default:return b}},press:function(b){if(targetIsInputField(b.target)){return b}var a=b.charCode?b.charCode:b.keyCode;
switch(a){case 44:return PageController.previous();
case 46:return PageController.next();
case 47:if(!Prototype.Browser.Gecko){return TOC.toggle()}break;
case 106:if(document.getElementById("jumpto_button").visible()){return document.getElementById("jumpTo").focus()}else{return b}break;
case 115:if(ADCSearchController.toggleMenu){ADCSearchController.toggleMenu(b)}break;
default:return b}}};
var QuickLook={create:function(){QuickLook.greyout=document.createElement("div");
QuickLook.greyout.id="QuickLookGreyout";
QuickLook.window=document.createElement("div");
QuickLook.window.id="QuickLookWindow";
QuickLook.window.innerHTML='<div id="QuickLookHeader"></div><div id="QuickLookBody"></div><div id="QuickLookFooter"></div>';
QuickLook.closeBox=document.createElement("div");
QuickLook.closeBox.id="QuickLookCloseBox";
document.body.appendChild(QuickLook.greyout);
document.body.appendChild(QuickLook.window);
document.body.appendChild(QuickLook.closeBox)},load:function(a){if(!QuickLook.greyout){QuickLook.create()}QuickLook.closeBox.observe("click",QuickLook.hide);
$("QuickLookBody").innerHTML="";
QuickLook.article=document.createElement("iframe");
QuickLook.article.id="QuickLookArticle";
QuickLook.article.src=a;
$("QuickLookBody").appendChild(QuickLook.article);
QuickLook.greyout.addClassName("visible");
QuickLook.window.addClassName("visible");
QuickLook.closeBox.addClassName("visible");
return QuickLook.window},hide:function(){QuickLook.closeBox.stopObserving("click",QuickLook.hide);
QuickLook.window.removeClassName("visible");
QuickLook.closeBox.removeClassName("visible");
QuickLook.greyout.removeClassName("visible");
return QuickLook.window}};
function ADCSearchController(){function a(c){if(!c.element().descendantOf("ssi_SearchMenu")){$("ssi_SearchButton").removeClassName("active");
$("ssi_SearchMenu").removeClassName("open");
document.stopObserving("click",a)}}function b(c){c.stop();
if($("ssi_SearchMenu").hasClassName("open")){a(c)}else{$("ssi_SearchButton").addClassName("active");
$("ssi_SearchMenu").addClassName("open");
$("ssi_SearchField").focus();
document.observe("click",a)}}if($("ssi_SearchButton")){this.toggleMenu=b;
return $("ssi_SearchButton").observe("click",b)}else{return null}}function initHeaderTOC(){contentFrame=new ContentFrame();
var a=new ADCSearchController()}document.observe("dom:loaded",initHeaderTOC);

